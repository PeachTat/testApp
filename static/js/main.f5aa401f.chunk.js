(this.webpackJsonptestapp=this.webpackJsonptestapp||[]).push([[0],{1:function(e,t,a){e.exports={back:"ModalWindow_back__2X09t",modal:"ModalWindow_modal__39ys5",wrap:"ModalWindow_wrap__3sx8F",form:"ModalWindow_form__1x-aC",comments:"ModalWindow_comments__1uGA7",close:"ModalWindow_close__Ta9fN",item:"ModalWindow_item__Hka3w"}},13:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},20:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),s=(a(18),a(2)),m=a.n(s),i=a(7),l=a(3),u=a(4),p=a(5),d=a(6),f=(a(20),a(9)),h=a.n(f),v=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:h.a.wrap},r.a.createElement("h1",null,"Test App"),r.a.createElement("div",{className:h.a.row},this.props.images.map((function(t){return r.a.createElement("img",{alt:"prop",src:t.url,key:t.id,onClick:function(){return e.props.modalActive(t.id,t.url)}})}))))}}]),a}(n.Component),g=a(8),b=a(12),w=a(1),_=a.n(w),k=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={comments:[],form:{firstName:"",comment:""}},e.onInputChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState({form:Object(b.a)({},e.state.form,Object(g.a)({},r,n))})},e.onSubmit=function(t){t.preventDefault();var a=e.state.form,n=a.firstName,r=a.comment,o={name:n,comment:r},c={date:new Date,text:r,id:"f".concat((~~(1e8*Math.random())).toString(16))};e.setState({comments:e.state.comments.concat(c)}),e.postComment(o)},e.postComment=function(){var t=Object(i.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://boiling-refuge-66454.herokuapp.com/images/".concat(e.props.id,"/comments"),{method:"POST",contentType:"application/json",body:JSON.stringify(a)});case 3:n=t.sent,console.log(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.getImage=Object(i.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://boiling-refuge-66454.herokuapp.com/images/".concat(e.props.id));case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent,e.setState({comments:n.comments}),console.log(n.comments),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getImage()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:_.a.back,onClick:this.props.onClose}),r.a.createElement("div",{className:_.a.modal},r.a.createElement("div",{className:_.a.wrap},r.a.createElement("form",{className:_.a.form,onSubmit:this.onSubmit},r.a.createElement("img",{alt:"",src:this.props.url}),r.a.createElement("input",{name:"firstName",type:"text",placeholder:"\u0412\u0430\u0448\u0435 \u0418\u043c\u044f",onChange:this.onInputChange}),r.a.createElement("input",{name:"comment",type:"text",placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:this.onInputChange}),r.a.createElement("button",{type:"submit"},"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439")),r.a.createElement("div",{className:_.a.comments},this.state.comments.map((function(e){var t=new Date(e.date).toLocaleDateString();return r.a.createElement("div",{key:e.id,className:_.a.comment},r.a.createElement("p",null,t),r.a.createElement("span",null,e.text))})))),r.a.createElement("div",{className:_.a.close,onClick:this.props.onClose},r.a.createElement("div",{className:_.a.item}),r.a.createElement("div",{className:_.a.item}))))}}]),a}(n.Component),E=(a(21),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={modalOpen:!1,images:[],id:null,url:""},e.modalActive=function(t,a){e.setState({modalOpen:!0,id:t,url:a}),console.log(t,a)},e.onClose=function(){e.setState({modalOpen:!1})},e.getImages=Object(i.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://boiling-refuge-66454.herokuapp.com/images");case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent,e.setState({images:n}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getImages()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{modalActive:this.modalActive,images:this.state.images}),this.state.modalOpen?r.a.createElement(k,{onClose:this.onClose,id:this.state.id,url:this.state.url}):null)}}]),a}(n.Component));c.a.render(r.a.createElement(E,null),document.getElementById("root"))},9:function(e,t,a){e.exports={wrap:"Pictures_wrap__23I-w",row:"Pictures_row__1rGkE"}}},[[13,1,2]]]);
//# sourceMappingURL=main.f5aa401f.chunk.js.map